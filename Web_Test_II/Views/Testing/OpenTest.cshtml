@using Web_Test_II_DAL.Entityes;
@using Web_Test_II.Models.ViewModels.TestingViewModel;
@model OpenTestViewModel

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Web_Test_II
@{
	int idTest = Model.Questions[0].Test.Id;
}


<h1>Открытый тест</h1>
<form asp-controller="Result" asp-action="ViewResultsStudent" asp-route-id="@idTest">
<ol type="1">
	@foreach(var question in Model.Questions)
	{
		int countTrue = 0;
		int count = 0;
		<li>			
			@foreach(var item in question.Answers)
			{
				count++;
				if (item.IsAnswer == true)
				{
						countTrue++;				
				}
			}
			@question.Name
			<input type="hidden" name="questionId" value="@question.Id"/>
			
			<ol type="a">
				@foreach(var answer in question.Answers)
				{
						<input type="hidden" name="answerId" value="@answer.Id"/>
						if (count==1)
						{
							<input type="text" name="question_@question.Id" value=""/>
						}
						else if (countTrue == 1)
						{
							<li>
								<input type="radio" name="question_@question.Id" value="@answer.Id"/>
								@answer.Name
							</li>
						}
						else if (countTrue > 1)
						{
							<li>
								<input type="checkbox" name="question_@question.Id" value="@answer.Id"/>
							@answer.Name
						</li>
					}

				}
			</ol>
		</li>
	}
</ol>
<input type="submit" value="Отправить"/>
</form>